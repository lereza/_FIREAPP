{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>{% block title %}FireApp{% endblock %}</title>
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport" />
    <link rel="icon" href="{% static 'img/icon.ico' %}" type="image/x-icon" />

    <!-- Fonts and icons -->
    <script src="{% static 'js/plugin/webfont/webfont.min.js' %}"></script>
    <script>
      WebFont.load({
        google: { families: ["Lato:300,400,700,900"] },
        custom: {
          families: ["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands", "simple-line-icons"],
          urls: ["{% static 'css/fonts.min.css' %}"]
        },
        active: function () {
          sessionStorage.fonts = true;
        },
      });
    </script>

    <!-- Aesthetic Global Style -->
    <style>
      body {
        background-color: #f3faff;
        color: #0d47a1;
        font-family: 'Lato', sans-serif;
      }

      .custom-navbar {
        background: linear-gradient(135deg, #1565c0, #1e88e5);
        color: #fff;
      }

      .custom-navbar .nav-link,
      .custom-navbar .navbar-brand {
        color: #fff !important;
      }

      .logo-header[data-background-color="blue"] {
        background-color: #64b5f6 !important;
      }

      .sidebar.sidebar-style-2 {
        background-color: #e3f2fd !important;
      }

      .nav.nav-primary > .nav-item.active > a,
      .nav.nav-primary > .nav-item > a:hover {
        background-color: #bbdefb !important;
        color: #0d47a1 !important;
      }

      .nav.nav-primary .nav-collapse .sub-item {
        color: #1565c0 !important;
      }

      .nav-section h4.text-section {
        color: #0d47a1;
      }

      .card,
      .main-panel .content,
      .footer {
        background-color: #ffffff;
        border-radius: 12px;
        box-shadow: 0 2px 6px rgba(100, 181, 246, 0.2);
      }

      .alert-success,
      .alert-info,
      .alert-warning {
        background-color: #e3f2fd;
        color: #0d47a1;
        border-color: #90caf9;
      }

      .form-control,
      .form-select {
        border-color: #90caf9;
      }

      .form-control:focus,
      .form-select:focus {
        border-color: #64b5f6;
        box-shadow: 0 0 0 0.2rem rgba(100, 181, 246, 0.25);
      }

      canvas {
        background-color: #ffffff !important;
      }
    </style>

    <!-- CSS Files -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/atlantis.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/demo.css' %}" />
  </head>

  <body>
    <div class="wrapper">
      <div class="main-header">
        <!-- Logo Header -->
        <div class="logo-header" data-background-color="blue">
          <a href="{% url 'dashboard-chart' %}" class="logo">
            <img src="{% static 'img/logo.svg' %}" alt="navbar brand" class="navbar-brand" />
          </a>
          <button class="navbar-toggler sidenav-toggler ml-auto" type="button" data-toggle="collapse" data-target="collapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"><i class="icon-menu"></i></span>
          </button>
          <button class="topbar-toggler more"><i class="icon-options-vertical"></i></button>
          <div class="nav-toggle">
            <button class="btn btn-toggle toggle-sidebar"><i class="icon-menu"></i></button>
          </div>
        </div>
        <!-- End Logo Header -->

        <!-- Navbar Header -->
        <nav class="navbar navbar-header navbar-expand-lg custom-navbar">
          <div class="container-fluid">
            <div class="collapse" id="search-nav"></div>
            <ul class="navbar-nav topbar-nav ml-md-auto align-items-center"></ul>
          </div>
        </nav>
        <!-- End Navbar -->
      </div>

      <!-- Sidebar -->
      <div class="sidebar sidebar-style-2">
        <div class="sidebar-wrapper scrollbar scrollbar-inner">
          <div class="sidebar-content">
            <div class="user">
              <div class="avatar-sm float-left mr-2">
                <img src="{% static 'img/profile.jpg' %}" alt="..." class="avatar-img rounded-circle" />
              </div>
              <div class="info">
                <a data-toggle="collapse" href="#collapseExample" aria-expanded="true">
                  <span>
                    lerezaNolsen
                    <span class="user-level">Administrator</span>
                    <span class="caret"></span>
                  </span>
                </a>
                <div class="collapse in" id="collapseExample">
                  <ul class="nav">
                    <li><a href="#"><span class="link-collapse">My Profile</span></a></li>
                    <li><a href="#"><span class="link-collapse">Edit Profile</span></a></li>
                    <li><a href="#"><span class="link-collapse">Settings</span></a></li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- Navigation -->
            <ul class="nav nav-primary">
              <li class="nav-item active">
                <a data-toggle="collapse" href="#dashboard"><i class="fas fa-home"></i><p>Dashboard</p><span class="caret"></span></a>
                <div class="collapse" id="dashboard">
                  <ul class="nav nav-collapse">
                    <li><a href="{% url 'dashboard-chart' %}"><span class="sub-item">Fire App Dashboard</span></a></li>
                  </ul>
                </div>
              </li>
              <li class="nav-section"><i class="fa fa-ellipsis-h"></i><h4 class="text-section">Components</h4></li>
              <li class="nav-item">
                <a data-toggle="collapse" href="#base"><i class="fas fa-layer-group"></i><p>List</p><span class="caret"></span></a>
                <div class="collapse" id="base">
                  <ul class="nav nav-collapse">
                    <li><a href="{% url 'locations-list' %}"><span class="sub-item">Locations</span></a></li>
                    <li><a href="{% url 'incident-list' %}"><span class="sub-item">Incidents</span></a></li>
                    <li><a href="{% url 'firestation-list' %}"><span class="sub-item">Fire Stations</span></a></li>
                    <li><a href="{% url 'firefighters-list' %}"><span class="sub-item">Firefighters</span></a></li>
                    <li><a href="{% url 'firetruck-list' %}"><span class="sub-item">Fire Truck</span></a></li>
                    <li><a href="{% url 'weather-list' %}"><span class="sub-item">Weather Conditions</span></a></li>
                  </ul>
                </div>
              </li>
              <li class="nav-item">
                <a data-toggle="collapse" href="#maps"><i class="fas fa-map-marker-alt"></i><p>Maps</p><span class="caret"></span></a>
                <div class="collapse" id="maps">
                  <ul class="nav nav-collapse">
                    <li><a href="{% url 'map-station' %}"><span class="sub-item">Fire Stations</span></a></li>
                    <li><a href="{% url 'fire-incidents' %}"><span class="sub-item">Fire Incidents</span></a></li>
                  </ul>
                </div>
              </li>
              <li class="nav-item">
                <a data-toggle="collapse" href="#charts"><i class="far fa-chart-bar"></i><p>Charts</p><span class="caret"></span></a>
                <div class="collapse" id="charts">
                  <ul class="nav nav-collapse">
                    <li><a href="{% url 'dashboard-chart' %}"><span class="sub-item">Chart Js</span></a></li>
                  </ul>
                </div>
              </li>
              <li class="nav-item">
                <a href="#"><i class="fas fa-desktop"></i><p>Widgets</p><span class="badge badge-success">4</span></a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- End Sidebar -->

      <!-- Main Content -->
      <div class="main-panel">
        <div class="content">
          {% block content %}{% endblock %}
        </div>
        <footer class="footer">
          <div class="container-fluid">
            <nav class="pull-left">
              <ul class="nav">
                <li class="nav-item"><a class="nav-link" href="https://www.themekita.com">ThemeKita</a></li>
                <li class="nav-item"><a class="nav-link" href="#">Help</a></li>
                <li class="nav-item"><a class="nav-link" href="#">Licenses</a></li>
              </ul>
            </nav>
            <div class="copyright ml-auto">
              2018, made with <i class="fa fa-heart heart text-danger"></i> by <a href="https://www.themekita.com">ThemeKita</a>
            </div>
          </div>
        </footer>
      </div>
    </div>

    <!-- Core JS Files -->
    <script src="{% static 'js/core/jquery.3.2.1.min.js' %}"></script>
    <script src="{% static 'js/core/popper.min.js' %}"></script>
    <script src="{% static 'js/core/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js' %}"></script>
    <script src="{% static 'js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js' %}"></script>
    <script src="{% static 'js/plugin/jquery-scrollbar/jquery.scrollbar.min.js' %}"></script>
    <script src="{% static 'js/plugin/chart.js/chart.min.js' %}"></script>
    <script src="{% static 'js/plugin/jquery.sparkline/jquery.sparkline.min.js' %}"></script>
    <script src="{% static 'js/plugin/chart-circle/circles.min.js' %}"></script>
    <script src="{% static 'js/plugin/datatables/datatables.min.js' %}"></script>
    <script src="{% static 'js/plugin/bootstrap-notify/bootstrap-notify.min.js' %}"></script>
    <script src="{% static 'js/plugin/jqvmap/jquery.vmap.min.js' %}"></script>
    <script src="{% static 'js/plugin/jqvmap/maps/jquery.vmap.world.js' %}"></script>
    <script src="{% static 'js/plugin/sweetalert/sweetalert.min.js' %}"></script>
    <script src="{% static 'js/atlantis.min.js' %}"></script>

    {% block chart %}{% endblock %}



    <!-- Toast container at bottom-right -->
<div id="toast-container" aria-live="polite" aria-atomic="true"
     style="position: fixed; bottom: 20px; right: 20px; z-index: 1055; display: flex; flex-direction: column; gap: 12px;">
</div>

{% if messages %}
<script>
document.addEventListener("DOMContentLoaded", function () {
    {% for message in messages %}
    (function() {
        const toastType = "{{ message.tags|default:'info' }}";

        const icons = {
            success: '✅',
            error: '❌',
            info: 'ℹ️',
            warning: '⚠️'
        };

        const colors = {
            success: '#22c55e',
            error: '#ef4444',
            info: '#3b82f6',
            warning: '#f59e0b'
        };

        const toastHTML = `
            <div class="custom-toast" role="alert" tabindex="-1" aria-label="${toastType} message" style="
                display: flex;
                align-items: center;
                background-color: #fff;
                border-left: 8px solid ${colors[toastType]};
                border-radius: 8px;
                padding: 16px 20px;
                box-shadow: 0 4px 16px rgba(0,0,0,0.1);
                min-width: 320px;
                max-width: 380px;
                font-family: system-ui, sans-serif;
                position: relative;
                transition: all 0.3s ease;
                opacity: 0;
                transform: translateY(20px);
            ">
                <div style="
                    font-size: 1.75rem;
                    margin-right: 14px;
                    color: ${colors[toastType]};
                    flex-shrink: 0;
                ">${icons[toastType]}</div>

                <div style="flex-grow: 1;">
                    <strong style="display: block; font-size: 1.1rem; margin-bottom: 4px; color: #111;">
                        ${toastType.charAt(0).toUpperCase() + toastType.slice(1)}
                    </strong>
                    <span style="color: #555;">{{ message|escapejs }}</span>
                </div>

                <button class="close-btn" aria-label="Close notification" style="
                    background: none;
                    border: none;
                    font-size: 1.25rem;
                    color: #999;
                    cursor: pointer;
                    margin-left: 12px;
                ">&times;</button>
            </div>`;

        const container = document.getElementById('toast-container');
        container.insertAdjacentHTML('beforeend', toastHTML);

        setTimeout(() => {
            const toast = container.lastElementChild;
            toast.style.opacity = '1';
            toast.style.transform = 'translateY(0)';

            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateY(20px)';
                setTimeout(() => toast.remove(), 300);
            }, 6000);

            toast.querySelector('.close-btn').addEventListener('click', () => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateY(20px)';
                setTimeout(() => toast.remove(), 300);
            });
        }, 50);
    })();
    {% endfor %}
});
</script>
{% endif %}

  </body>
</html>
